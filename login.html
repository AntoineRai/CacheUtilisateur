<!DOCTYPE html>
<html>
  <head>
    <title>Page de connexion</title>
    <style>
      .hidden {
        display: none;
      }
    </style>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <h1>Page de connexion</h1>

    <div id="message"></div>

    <form id="loginForm" action="/login" method="POST">
      <label for="username">Nom d'utilisateur :</label>
      <input type="text" id="username" name="username" required /><br /><br />

      <label for="password">Mot de passe :</label>
      <input
        type="password"
        id="password"
        name="password"
        required
      /><br /><br />

      <input type="submit" value="Se connecter" />
    </form>
    <button id="logoutButton" class="hidden">Déconnexion</button>
    <a href="index.html"><button>Pas de compte ? S'inscrire</button></a>

    <script>
      if (document.cookie.includes("sessionId")) {
        const loginForm = document.getElementById("loginForm");
        const logoutButton = document.getElementById("logoutButton");

        loginForm.classList.add("hidden");
        logoutButton.classList.remove("hidden");

        const message = document.getElementById("message");
        message.textContent = "Vous êtes déjà connecté !";

        logoutButton.addEventListener("click", () => {
          document.cookie =
            "sessionId=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";

          window.location.href = "/login";
        });
      }
    </script>
  </body>
</html>
